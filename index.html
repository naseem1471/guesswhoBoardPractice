<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess Who?</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css",
      href='https://fonts.googleapis.com/css?family=Montserrat:400,700' 
    />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="messages"></div>

    <div class="startContainer">
        <div class="containerImage">
            <img src="images/guessWhom.jpg" alt="guessWhom">
        </div>
        <form id="my-form">
            <label for="chosen">Choose a number between 1 and 37:</label>
            <input type="number" id="chosen" name="chosen" min="1" max="37" required>
            <button type="submit">Enter</button>   
        </form>
    </div>
    <p id="result"></p>

    
    <div id="sendMsg">
        <input type="text" id="msgTxt" placeholder="ENTER YOUR MSG...">
        <input type="submit" id="msgBtn" value="send" onclick="module.sendMsg()">
    </div>

    <div class="container">
        <div class="swiper Slider-container">
          <div class="swiper-wrapper">
            <div class="swiper-slide" data-id="1">
              <img src="images/img_1.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="2">
              <img src="images/img_2.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="3">
              <img src="images/img_3.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="4">
              <img src="images/img_4.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="5">
              <img src="images/img_5.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="6">
              <img src="images/img_6.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="7">
              <img src="images/img_7.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="8">
              <img src="images/img_8.png" alt="Slide Image" />
              </div>
            <div class="swiper-slide" data-id="9">
              <img src="images/img_9.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="10">
              <img src="images/img_10.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="11">
                <img src="images/img_11.png" alt="Slide Image" />
            </div>
            <div class="swiper-slide" data-id="12">
                <img src="images/img_12.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="13">
                <img src="images/img_13.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="14">
                <img src="images/img_14.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="15">
                <img src="images/img_15.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="16">
                <img src="images/img_16.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="17">
                <img src="images/img_17.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="18">
                <img src="images/img_18.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="19">
                <img src="images/img_19.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="20">
                <img src="images/img_20.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="20">
                <img src="images/img_21.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="22">
                <img src="images/img_22.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="23">
                <img src="images/img_23.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="24">
                <img src="images/img_24.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="25">
                <img src="images/img_25.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="26">
                <img src="images/img_26.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="27">
                <img src="images/img_27.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="28">
                <img src="images/img_28.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="29">
                <img src="images/img_29.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="30">
                <img src="images/img_30.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="31">
                <img src="images/img_31.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="32">
                <img src="images/img_32.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="33">
                <img src="images/img_33.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="34">
                <img src="images/img_34.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="35">
                <img src="images/img_35.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="36"png>               
                <img src="images/img_36.png" alt="Slide Image" />
              </div>
              <div class="swiper-slide" data-id="37"png>               
                <img src="images/img_37.png" alt="Slide Image" />
              </div>
          </div>
        </div>
    </div>

    <div class="buttons">
        <button class="btn first" id="reject">REJECT</button>
        <button class="btn third" id="accept">ACCEPT</button>
    </div>

<div class="grid">
  <div class="square" data-id="1" id="square-1"></div>
  <div class="square" data-id="2" id="square-2"></div>
  <div class="square" data-id="3" id="square-3"></div>
  <div class="square" data-id="4" id="square-4"></div>
  <div class="square" data-id="5" id="square-5"></div>
  <div class="square" data-id="6" id="square-6"></div>
  <div class="square" data-id="7" id="square-7"></div>
  <div class="square" data-id="8" id="square-8"></div>
  <div class="square" data-id="9" id="square-9"></div>
  <div class="square" data-id="10" id="square-10"></div>
  <div class="square" data-id="11" id="square-11"></div>
  <div class="square" data-id="12" id="square-12"></div>
  <div class="square" data-id="13" id="square-13"></div>
  <div class="square" data-id="14" id="square-14"></div>
  <div class="square" data-id="15" id="square-15"></div>
  <div class="square" data-id="16" id="square-16"></div>
  <div class="square" data-id="17" id="square-17"></div>
  <div class="square" data-id="18" id="square-18"></div>
  <div class="square" data-id="19" id="square-19"></div>
  <div class="square" data-id="20" id="square-20"></div>
  <div class="square" data-id="21" id="square-21"></div>
  <div class="square" data-id="22" id="square-22"></div>
  <div class="square" data-id="23" id="square-23"></div>
  <div class="square" data-id="24" id="square-24"></div>
  <div class="square" data-id="25" id="square-10"></div>
  <div class="square" data-id="26" id="square-11"></div>
  <div class="square" data-id="27" id="square-12"></div>
  <div class="square" data-id="28" id="square-13"></div>
  <div class="square" data-id="29" id="square-14"></div>
  <div class="square" data-id="30" id="square-15"></div>
  <div class="square" data-id="31" id="square-16"></div>
  <div class="square" data-id="32" id="square-17"></div>
  <div class="square" data-id="33" id="square-18"></div>
  <div class="square" data-id="34" id="square-19"></div>
  <div class="square" data-id="35" id="square-20"></div>
  <div class="square" data-id="36" id="square-21"></div>
  <div class="square" data-id="37" id="square-22"></div>
  <div class="square" data-id="38" id="square-23"></div>
  <div class="square" data-id="39" id="square-24"></div>
</div>
<p>THE OTHER PLAYERS GAME BOARD</p>



    <script>
      module = {};
  </script>
  <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
      import { getDatabase, ref, set, remove, onChildAdded, onChildRemoved } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

      const firebaseConfig = {
      apiKey: "AIzaSyBFucjhQZsAngmtUxldhCMS01IdF1EBM5M",
      authDomain: "newform-718a7.firebaseapp.com",
      databaseURL: "https://newform-718a7-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "newform-718a7",
      storageBucket: "newform-718a7.appspot.com",
      messagingSenderId: "9032405366",
      appId: "1:9032405366:web:6dce6e07ae2f4d1a03aa57"
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);


      
      // variables
      var msgTxt = document.getElementById('msgTxt');
      var sender;
      if(sessionStorage.getItem('sender')){
          sender = sessionStorage.getItem('sender');
      } else {
          sender = prompt('PLEASE ENTER YOUR NAME');
          sessionStorage.setItem('sender',sender);
      }

      console.log(sender)

      // Function to clear session storage
      function clearSessionStorage() {
      sessionStorage.clear();
      console.log('Session storage cleared.');
      }

      // Set an interval to clear session storage every 5 minutes (20 * 60 * 1000 milliseconds)
      const interval = 5 * 60 * 1000;
      setInterval(clearSessionStorage, interval);


      


      // TO SEND MESSAGES
          module.sendMsg = function sendMsg(){
          var msg = msgTxt.value;
          var timestamp = new Date().getTime();
          var readableTime = new Date(timestamp).toLocaleString();
          set(ref(db,"MESSAGES/"+timestamp),{
              msg : msg,
              sender : sender,
              readableTime: readableTime

          })

          msgTxt.value="";
      }

       // TO RECEIVE MSG
    onChildAdded(ref(db,"MESSAGES"), (data)=>{
        if(data.val().sender == sender){
            messages.innerHTML += "<div style=justify-content:end class=outer id="+data.key+"><div id=inner class=me>you : "+data.val().msg+"<br> "+data.val().readableTime+"</div></div>";
        } else {
            messages.innerHTML += "<div class=outer id="+data.key+"><div id=inner class=notMe>"+data.val().sender+" : "+data.val().msg+"<br>"+data.val().readableTime+"</div></div>";
        }
    })
  </script>




        
      
    

        <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
        <script src="script.js"></script>
</body>
</html>